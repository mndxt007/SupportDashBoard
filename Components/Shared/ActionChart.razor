@using ApexCharts
<div style="padding:100px;">
    <ApexChart TItem="CaseModel" Title="Action" Options="options" Width="600" Height="600">

        <ApexPointSeries Items="CaseModels"
                         SeriesType="SeriesType.Pie"
                         Name="Action"
                         XValue="@(e => e.CaseAnalysisModel.Action)"
                         YAggregate="@(e => e.Count(x=> x.CaseAnalysisModel.Action == x.CaseAnalysisModel.Action) )"
                         OrderByDescending="e=>e.Y" />
    </ApexChart>
</div>
@code {
    [Parameter]
    public List<CaseModel> CaseModels { get; set; } = new();
    private ApexChartOptions<CaseModel> options { get; set; } = new();

    protected override void OnInitialized()
    {
        options.PlotOptions = new PlotOptions
        {
            Pie = new PlotOptionsPie
            {
                Donut = new PlotOptionsDonut
                {
                    Labels = new DonutLabels
                    {
                        Total = new DonutLabelTotal { FontSize = "24px", Color = "#D807B8", Formatter = @"function (w) {return w.globals.seriesTotals.reduce((a, b) => { return (a + b) }, 0)}" }
                    }
                }
            }
        };
    }
}